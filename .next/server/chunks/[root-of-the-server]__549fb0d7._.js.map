{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/lib/prisma.js"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\nimport { PrismaNeon } from '@prisma/adapter-neon';\r\nimport { neonConfig } from '@neondatabase/serverless';\r\n\r\nimport ws from 'ws';\r\nneonConfig.webSocketConstructor = ws; \r\n\r\n// To work in edge environments (Cloudflare Workers, Vercel Edge, etc.), enable querying over fetch\r\nneonConfig.poolQueryViaFetch = true\r\n\r\n// Type definitions\r\n// declare global {\r\n//   var prisma: PrismaClient | undefined\r\n// }\r\n\r\nconst connectionString = `${process.env.DATABASE_URL}`;\r\n\r\nconst adapter = new PrismaNeon({ connectionString });\r\nconst prisma = global.prisma || new PrismaClient(process.env.NEXT_RUNTIME === \"edge\" ? { adapter } : {});\r\n\r\nif (process.env.NEXT_RUNTIME !== 'edge') global.prisma = prisma;\r\n\r\nexport default prisma; "],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAEA;;;;;AACA,sKAAU,CAAC,oBAAoB,GAAG,2JAAE;AAEpC,mGAAmG;AACnG,sKAAU,CAAC,iBAAiB,GAAG;AAE/B,mBAAmB;AACnB,mBAAmB;AACnB,yCAAyC;AACzC,IAAI;AAEJ,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,6KAAU,CAAC;IAAE;AAAiB;AAClD,MAAM,SAAS,yDAAO,MAAM,IAAI,IAAI,6IAAY,CAAC,sCAAsC,0BAAc,CAAC;AAEtG,wCAAyC,yDAAO,MAAM,GAAG;uCAE1C","debugId":null}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/app/api/rating/route.js"],"sourcesContent":["import prisma from \"@/lib/prisma\";\r\nimport { getAuth } from \"@clerk/nextjs/server\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\n\r\n// Add new rating\r\nexport async function POST(request){\r\n    try {\r\n        const { userId } = getAuth(request)\r\n        const {orderId, productId, rating, review} = await request.json()\r\n        const order = await prisma.order.findUnique({where: {id: orderId, userId}})\r\n\r\n        if(!order){\r\n            return NextResponse.json({ error: \"Order not found\" }, { status: 404 })\r\n        }\r\n\r\n         const isAlreadyRated = await prisma.rating.findFirst({where: {productId, orderId}})\r\n\r\n         if(isAlreadyRated){\r\n            return NextResponse.json({ error: \"Product already rated\" }, { status: 400 })\r\n         }\r\n\r\n         const response = await prisma.rating.create({\r\n            data: {userId, productId, rating, review, orderId}\r\n         })\r\n\r\n         return NextResponse.json({message: \"Rating added successfully\", rating: response})\r\n\r\n      \r\n    } catch (error) {\r\n        console.error(error);\r\n        return NextResponse.json({error: error.code || error.message}, { status: 400 })\r\n    }\r\n}\r\n\r\n// Get all ratings for a user\r\nexport async function GET(request){\r\n    try {\r\n        const {userId} = getAuth(request)\r\n        if(!userId){\r\n            return NextResponse.json({error: \"Unauthorized\"}, { status: 401 })\r\n        }\r\n        const ratings = await prisma.rating.findMany({\r\n            where: {userId}\r\n        })\r\n\r\n        return NextResponse.json({ratings})\r\n    } catch (error) {\r\n        console.error(error);\r\n        return NextResponse.json({error: error.code || error.message}, { status: 400 })\r\n    }\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAIO,eAAe,KAAK,OAAO;IAC9B,IAAI;QACA,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,wLAAO,EAAC;QAC3B,MAAM,EAAC,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,EAAC,GAAG,MAAM,QAAQ,IAAI;QAC/D,MAAM,QAAQ,MAAM,0HAAM,CAAC,KAAK,CAAC,UAAU,CAAC;YAAC,OAAO;gBAAC,IAAI;gBAAS;YAAM;QAAC;QAEzE,IAAG,CAAC,OAAM;YACN,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEC,MAAM,iBAAiB,MAAM,0HAAM,CAAC,MAAM,CAAC,SAAS,CAAC;YAAC,OAAO;gBAAC;gBAAW;YAAO;QAAC;QAEjF,IAAG,gBAAe;YACf,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,MAAM,WAAW,MAAM,0HAAM,CAAC,MAAM,CAAC,MAAM,CAAC;YACzC,MAAM;gBAAC;gBAAQ;gBAAW;gBAAQ;gBAAQ;YAAO;QACpD;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,SAAS;YAA6B,QAAQ;QAAQ;IAGrF,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,OAAO,MAAM,IAAI,IAAI,MAAM,OAAO;QAAA,GAAG;YAAE,QAAQ;QAAI;IACjF;AACJ;AAGO,eAAe,IAAI,OAAO;IAC7B,IAAI;QACA,MAAM,EAAC,MAAM,EAAC,GAAG,IAAA,wLAAO,EAAC;QACzB,IAAG,CAAC,QAAO;YACP,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAC,OAAO;YAAc,GAAG;gBAAE,QAAQ;YAAI;QACpE;QACA,MAAM,UAAU,MAAM,0HAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YACzC,OAAO;gBAAC;YAAM;QAClB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC;QAAO;IACrC,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,OAAO,MAAM,IAAI,IAAI,MAAM,OAAO;QAAA,GAAG;YAAE,QAAQ;QAAI;IACjF;AACJ","debugId":null}}]
}
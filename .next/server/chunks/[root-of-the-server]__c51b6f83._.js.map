{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/lib/prisma.js"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\nimport { PrismaNeon } from '@prisma/adapter-neon';\r\nimport { neonConfig } from '@neondatabase/serverless';\r\n\r\nimport ws from 'ws';\r\nneonConfig.webSocketConstructor = ws; \r\n\r\n// To work in edge environments (Cloudflare Workers, Vercel Edge, etc.), enable querying over fetch\r\nneonConfig.poolQueryViaFetch = true\r\n\r\n// Type definitions\r\n// declare global {\r\n//   var prisma: PrismaClient | undefined\r\n// }\r\n\r\nconst connectionString = `${process.env.DATABASE_URL}`;\r\n\r\nconst adapter = new PrismaNeon({ connectionString });\r\nconst prisma = global.prisma || new PrismaClient(process.env.NEXT_RUNTIME === \"edge\" ? { adapter } : {});\r\n\r\nif (process.env.NEXT_RUNTIME !== 'edge') global.prisma = prisma;\r\n\r\nexport default prisma; "],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAEA;;;;;AACA,sKAAU,CAAC,oBAAoB,GAAG,2JAAE;AAEpC,mGAAmG;AACnG,sKAAU,CAAC,iBAAiB,GAAG;AAE/B,mBAAmB;AACnB,mBAAmB;AACnB,yCAAyC;AACzC,IAAI;AAEJ,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,6KAAU,CAAC;IAAE;AAAiB;AAClD,MAAM,SAAS,yDAAO,MAAM,IAAI,IAAI,6IAAY,CAAC,sCAAsC,0BAAc,CAAC;AAEtG,wCAAyC,yDAAO,MAAM,GAAG;uCAE1C","debugId":null}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/middlewares/authSeller.js"],"sourcesContent":["import prisma from '@/lib/prisma';\r\n\r\n\r\nconst authSeller = async (userId) => {\r\n    try {\r\n        const user = await prisma.user.findUnique({\r\n            where: { id: userId },\r\n            include: { store: true },\r\n        })\r\n\r\n        if(user.store){\r\n            if(user.store.status === 'approved'){\r\n                return user.store.id\r\n            }\r\n        }else{\r\n            return false\r\n        }\r\n    } catch (error) {\r\n        console.error(error)\r\n        return false\r\n    }\r\n}\r\n\r\nexport default authSeller"],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM,aAAa,OAAO;IACtB,IAAI;QACA,MAAM,OAAO,MAAM,0HAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACtC,OAAO;gBAAE,IAAI;YAAO;YACpB,SAAS;gBAAE,OAAO;YAAK;QAC3B;QAEA,IAAG,KAAK,KAAK,EAAC;YACV,IAAG,KAAK,KAAK,CAAC,MAAM,KAAK,YAAW;gBAChC,OAAO,KAAK,KAAK,CAAC,EAAE;YACxB;QACJ,OAAK;YACD,OAAO;QACX;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO;IACX;AACJ;uCAEe","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/app/api/store/dashboard/route.js"],"sourcesContent":["import prisma from \"@/lib/prisma\";\r\nimport authSeller from \"@/middlewares/authSeller\";\r\nimport { getAuth } from \"@clerk/nextjs/server\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function GET(request){\r\n    try {\r\n        const { userId } = getAuth(request)\r\n        const storeId = await authSeller(userId)\r\n\r\n        // Get Orders\r\n        const orders = await prisma.order.findMany({\r\n            where: { storeId },\r\n            include: { user: true }\r\n        })\r\n\r\n        // Get Products Count\r\n        const products = await prisma.product.count({ where: { storeId } })\r\n\r\n        // Calculate Totals\r\n        const totalEarnings = orders\r\n            .filter(o => o.isPaid)\r\n            .reduce((acc, order) => acc + order.total, 0)\r\n\r\n        // Unique Customers\r\n        const uniqueCustomers = new Set(orders.map(o => o.userId)).size\r\n\r\n        // Chart Data (Last 7 days)\r\n        const salesChart = Array.from({ length: 7 }, (_, i) => {\r\n            const d = new Date()\r\n            d.setDate(d.getDate() - i)\r\n            const dateStr = d.toLocaleDateString()\r\n            \r\n            const dayRevenue = orders\r\n                .filter(o => new Date(o.createdAt).toLocaleDateString() === dateStr && o.isPaid)\r\n                .reduce((acc, o) => acc + o.total, 0)\r\n            \r\n            return { date: dateStr.slice(0, 5), revenue: dayRevenue } // Returns \"MM/DD\"\r\n        }).reverse()\r\n\r\n        const dashboardData = {\r\n            totalProducts: products,\r\n            totalEarnings,\r\n            totalOrders: orders.length,\r\n            totalCustomers: uniqueCustomers,\r\n            salesChart\r\n        }\r\n\r\n        return NextResponse.json({ dashboardData });\r\n    } catch (error) {\r\n        return NextResponse.json({ error: error.message }, { status: 400 })\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,OAAO;IAC7B,IAAI;QACA,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,wLAAO,EAAC;QAC3B,MAAM,UAAU,MAAM,IAAA,sIAAU,EAAC;QAEjC,aAAa;QACb,MAAM,SAAS,MAAM,0HAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;YACvC,OAAO;gBAAE;YAAQ;YACjB,SAAS;gBAAE,MAAM;YAAK;QAC1B;QAEA,qBAAqB;QACrB,MAAM,WAAW,MAAM,0HAAM,CAAC,OAAO,CAAC,KAAK,CAAC;YAAE,OAAO;gBAAE;YAAQ;QAAE;QAEjE,mBAAmB;QACnB,MAAM,gBAAgB,OACjB,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,EACpB,MAAM,CAAC,CAAC,KAAK,QAAU,MAAM,MAAM,KAAK,EAAE;QAE/C,mBAAmB;QACnB,MAAM,kBAAkB,IAAI,IAAI,OAAO,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM,GAAG,IAAI;QAE/D,2BAA2B;QAC3B,MAAM,aAAa,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAE,GAAG,CAAC,GAAG;YAC7C,MAAM,IAAI,IAAI;YACd,EAAE,OAAO,CAAC,EAAE,OAAO,KAAK;YACxB,MAAM,UAAU,EAAE,kBAAkB;YAEpC,MAAM,aAAa,OACd,MAAM,CAAC,CAAA,IAAK,IAAI,KAAK,EAAE,SAAS,EAAE,kBAAkB,OAAO,WAAW,EAAE,MAAM,EAC9E,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;YAEvC,OAAO;gBAAE,MAAM,QAAQ,KAAK,CAAC,GAAG;gBAAI,SAAS;YAAW,EAAE,kBAAkB;;QAChF,GAAG,OAAO;QAEV,MAAM,gBAAgB;YAClB,eAAe;YACf;YACA,aAAa,OAAO,MAAM;YAC1B,gBAAgB;YAChB;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAc;IAC7C,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACrE;AACJ","debugId":null}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/configs/imageKit.js"],"sourcesContent":["import ImageKit from \"imagekit\";\r\n\r\nvar imagekit = new ImageKit({\r\n    publicKey : process.env.IMAGEKIT_PUBLIC_KEY,\r\n    privateKey : process.env.IMAGEKIT_PRIVATE_KEY,\r\n    urlEndpoint : process.env.IMAGEKIT_URL_ENDPOINT\r\n});\r\n\r\nexport default imagekit;"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI,WAAW,IAAI,sJAAQ,CAAC;IACxB,WAAY,QAAQ,GAAG,CAAC,mBAAmB;IAC3C,YAAa,QAAQ,GAAG,CAAC,oBAAoB;IAC7C,aAAc,QAAQ,GAAG,CAAC,qBAAqB;AACnD;uCAEe","debugId":null}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/lib/prisma.js"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\nimport { PrismaNeon } from '@prisma/adapter-neon';\r\nimport { neonConfig } from '@neondatabase/serverless';\r\n\r\nimport ws from 'ws';\r\nneonConfig.webSocketConstructor = ws; \r\n\r\n// To work in edge environments (Cloudflare Workers, Vercel Edge, etc.), enable querying over fetch\r\nneonConfig.poolQueryViaFetch = true\r\n\r\n// Type definitions\r\n// declare global {\r\n//   var prisma: PrismaClient | undefined\r\n// }\r\n\r\nconst connectionString = `${process.env.DATABASE_URL}`;\r\n\r\nconst adapter = new PrismaNeon({ connectionString });\r\nconst prisma = global.prisma || new PrismaClient(process.env.NEXT_RUNTIME === \"edge\" ? { adapter } : {});\r\n\r\nif (process.env.NEXT_RUNTIME !== 'edge') global.prisma = prisma;\r\n\r\nexport default prisma; "],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAEA;;;;;AACA,sKAAU,CAAC,oBAAoB,GAAG,2JAAE;AAEpC,mGAAmG;AACnG,sKAAU,CAAC,iBAAiB,GAAG;AAE/B,mBAAmB;AACnB,mBAAmB;AACnB,yCAAyC;AACzC,IAAI;AAEJ,MAAM,mBAAmB,GAAG,QAAQ,GAAG,CAAC,YAAY,EAAE;AAEtD,MAAM,UAAU,IAAI,6KAAU,CAAC;IAAE;AAAiB;AAClD,MAAM,SAAS,yDAAO,MAAM,IAAI,IAAI,6IAAY,CAAC,sCAAsC,0BAAc,CAAC;AAEtG,wCAAyC,yDAAO,MAAM,GAAG;uCAE1C","debugId":null}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/middlewares/authSeller.js"],"sourcesContent":["import prisma from '@/lib/prisma';\r\n\r\n\r\nconst authSeller = async (userId) => {\r\n    try {\r\n        const user = await prisma.user.findUnique({\r\n            where: { id: userId },\r\n            include: { store: true },\r\n        })\r\n\r\n        if(user.store){\r\n            if(user.store.status === 'approved'){\r\n                return user.store.id\r\n            }\r\n        }else{\r\n            return false\r\n        }\r\n    } catch (error) {\r\n        console.error(error)\r\n        return false\r\n    }\r\n}\r\n\r\nexport default authSeller"],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM,aAAa,OAAO;IACtB,IAAI;QACA,MAAM,OAAO,MAAM,0HAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACtC,OAAO;gBAAE,IAAI;YAAO;YACpB,SAAS;gBAAE,OAAO;YAAK;QAC3B;QAEA,IAAG,KAAK,KAAK,EAAC;YACV,IAAG,KAAK,KAAK,CAAC,MAAM,KAAK,YAAW;gBAChC,OAAO,KAAK,KAAK,CAAC,EAAE;YACxB;QACJ,OAAK;YACD,OAAO;QACX;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO;IACX;AACJ;uCAEe","debugId":null}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/app/api/store/product/route.js"],"sourcesContent":["import imagekit from \"@/configs/imageKit\"\r\nimport prisma from \"@/lib/prisma\"\r\nimport authSeller from \"@/middlewares/authSeller\"\r\nimport {getAuth} from \"@clerk/nextjs/server\"\r\nimport { NextResponse } from \"next/server\";\r\n\r\n// POST (Add Product)\r\nexport async function POST(request){\r\n    try {\r\n        const { userId } = getAuth(request)\r\n        const storeId = await authSeller(userId)\r\n        if(!storeId) return NextResponse.json({error: 'not authorized'}, { status: 401 } )\r\n\r\n        const formData = await request.formData()\r\n        const name = formData.get(\"name\")\r\n        const description = formData.get(\"description\")\r\n        const mrp = Number(formData.get(\"mrp\"))\r\n        const price = Number(formData.get(\"price\"))\r\n        const category = formData.get(\"category\")\r\n        const stock = Number(formData.get(\"stock\") || 0) // Capture Stock\r\n        const images = formData.getAll(\"images\")\r\n\r\n        if(!name || !description || !mrp || !price || !category || images.length < 1){\r\n            return NextResponse.json({error: 'missing product details'}, { status: 400 } )\r\n        }\r\n\r\n        const imagesUrl = await Promise.all(images.map(async (image) => {\r\n            const buffer = Buffer.from(await image.arrayBuffer());\r\n            const response = await imagekit.upload({ file: buffer, fileName: image.name, folder: \"products\" })\r\n            return imagekit.url({ path: response.filePath, transformation: [{ quality: 'auto' }, { format: 'webp' }, { width: '1024' }] })\r\n        }))\r\n\r\n        await prisma.product.create({\r\n             data: { name, description, mrp, price, category, stock, images: imagesUrl, storeId }\r\n        })\r\n         return NextResponse.json({message: \"Product added successfully\"})\r\n    } catch (error) {\r\n        return NextResponse.json({ error: error.message }, { status: 400 })\r\n    }\r\n}\r\n\r\n// GET Products\r\nexport async function GET(request){\r\n    try {\r\n        const { userId } = getAuth(request)\r\n        const storeId = await authSeller(userId)\r\n        if(!storeId) return NextResponse.json({error: 'not authorized'}, { status: 401 } )\r\n        const products = await prisma.product.findMany({ where: { storeId }})\r\n        return NextResponse.json({products})\r\n    } catch (error) {\r\n        return NextResponse.json({ error: error.message }, { status: 400 })\r\n    }\r\n}\r\n\r\n// PUT (Update Product)\r\nexport async function PUT(request) {\r\n    try {\r\n        const { userId } = getAuth(request)\r\n        const storeId = await authSeller(userId)\r\n        if(!storeId) return NextResponse.json({error: 'not authorized'}, { status: 401 } )\r\n\r\n        const body = await request.json()\r\n        const { id, name, description, mrp, price, stock } = body\r\n\r\n        await prisma.product.update({\r\n            where: { id, storeId },\r\n            data: { name, description, mrp, price, stock }\r\n        })\r\n\r\n        return NextResponse.json({ message: \"Product updated\" })\r\n    } catch (error) {\r\n        return NextResponse.json({ error: error.message }, { status: 400 })\r\n    }\r\n}\r\n\r\n// DELETE Product\r\nexport async function DELETE(request) {\r\n    try {\r\n        const { userId } = getAuth(request)\r\n        const storeId = await authSeller(userId)\r\n        if(!storeId) return NextResponse.json({error: 'not authorized'}, { status: 401 } )\r\n\r\n        const { searchParams } = new URL(request.url)\r\n        const id = searchParams.get('id')\r\n\r\n        await prisma.product.delete({ where: { id, storeId } })\r\n\r\n        return NextResponse.json({ message: \"Product deleted\" })\r\n    } catch (error) {\r\n        return NextResponse.json({ error: error.message }, { status: 400 })\r\n    }\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}
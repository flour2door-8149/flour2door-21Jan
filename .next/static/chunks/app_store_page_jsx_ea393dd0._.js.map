{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/app/store/page.jsx"],"sourcesContent":["'use client'\r\nimport Loading from \"@/components/Loading\"\r\nimport { useAuth } from \"@clerk/nextjs\"\r\nimport axios from \"axios\"\r\nimport { CircleDollarSignIcon, ShoppingBasketIcon, StarIcon, TagsIcon, Download, Users } from \"lucide-react\"\r\nimport { useEffect, useState } from \"react\"\r\nimport toast from \"react-hot-toast\"\r\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts'\r\nimport * as XLSX from 'xlsx'\r\n\r\nexport default function Dashboard() {\r\n    const {getToken} = useAuth()\r\n    const currency = process.env.NEXT_PUBLIC_CURRENCY_SYMBOL || '$'\r\n    const [loading, setLoading] = useState(true)\r\n    const [data, setData] = useState({\r\n        totalProducts: 0,\r\n        totalEarnings: 0,\r\n        totalOrders: 0,\r\n        totalCustomers: 0,\r\n        salesChart: []\r\n    })\r\n\r\n    const fetchDashboardData = async () => {\r\n        try {\r\n            const token = await getToken()\r\n            const { data } = await axios.get('/api/store/dashboard', {headers: { Authorization: `Bearer ${token}` }})\r\n            setData(data.dashboardData)\r\n        } catch (error) {\r\n            toast.error(\"Failed to load dashboard data\")\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const exportData = () => {\r\n        const worksheet = XLSX.utils.json_to_sheet(data.salesChart);\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, \"Sales History\");\r\n        XLSX.writeFile(workbook, \"store_analytics.xlsx\");\r\n    }\r\n\r\n    useEffect(() => { fetchDashboardData() }, [])\r\n\r\n    if (loading) return <Loading />\r\n\r\n    const StatCard = ({ title, value, icon: Icon, color }) => (\r\n        <div className=\"flex items-center gap-5 border border-slate-200 p-5 rounded-xl bg-white shadow-sm hover:shadow-md transition-shadow\">\r\n            <div className={`p-3 rounded-full ${color}`}>\r\n                <Icon size={26} className=\"text-white\" />\r\n            </div>\r\n            <div>\r\n                <p className=\"text-sm text-slate-500 font-medium\">{title}</p>\r\n                <b className=\"text-2xl font-bold text-slate-800\">{value}</b>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div className=\"mb-20\">\r\n            <div className=\"flex justify-between items-center mb-8\">\r\n                <h1 className=\"text-2xl text-slate-600\">Seller <span className=\"text-slate-900 font-bold\">Dashboard</span></h1>\r\n                <button onClick={exportData} className=\"flex items-center gap-2 bg-green-600 text-white px-5 py-2.5 rounded-lg hover:bg-green-700 transition font-medium text-sm shadow-sm\">\r\n                    <Download size={18}/> Export Excel\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10\">\r\n                <StatCard title=\"Total Revenue\" value={`${currency}${data.totalEarnings}`} icon={CircleDollarSignIcon} color=\"bg-green-500\" />\r\n                <StatCard title=\"Total Orders\" value={data.totalOrders} icon={TagsIcon} color=\"bg-blue-500\" />\r\n                <StatCard title=\"Products\" value={data.totalProducts} icon={ShoppingBasketIcon} color=\"bg-purple-500\" />\r\n                <StatCard title=\"Customers\" value={data.totalCustomers} icon={Users} color=\"bg-orange-500\" />\r\n            </div>\r\n\r\n            <div className=\"bg-white p-6 rounded-xl border border-slate-200 shadow-sm mb-10\">\r\n                <h3 className=\"text-lg font-bold mb-6 text-slate-700\">Sales Overview (Last 7 Days)</h3>\r\n                <div className=\"h-[350px] w-full\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                        <AreaChart data={data.salesChart}>\r\n                            <defs>\r\n                                <linearGradient id=\"colorRevenue\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                    <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.8}/>\r\n                                    <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0}/>\r\n                                </linearGradient>\r\n                            </defs>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#e5e7eb\" />\r\n                            <XAxis dataKey=\"date\" axisLine={false} tickLine={false} tick={{fill: '#6b7280', fontSize: 12}} dy={10} />\r\n                            <YAxis axisLine={false} tickLine={false} tick={{fill: '#6b7280', fontSize: 12}} />\r\n                            <Tooltip contentStyle={{backgroundColor: '#fff', borderRadius: '8px', border: '1px solid #e5e7eb', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)'}} />\r\n                            <Area type=\"monotone\" dataKey=\"revenue\" stroke=\"#3b82f6\" strokeWidth={3} fillOpacity={1} fill=\"url(#colorRevenue)\" />\r\n                        </AreaChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}
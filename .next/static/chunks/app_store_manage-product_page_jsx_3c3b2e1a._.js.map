{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Flour2door/app/store/manage-product/page.jsx"],"sourcesContent":["'use client'\r\nimport { useEffect, useState } from \"react\"\r\nimport { toast } from \"react-hot-toast\"\r\nimport Image from \"next/image\"\r\nimport Loading from \"@/components/Loading\"\r\nimport { productDummyData } from \"@/assets/assets\"\r\nimport { useAuth, useUser } from \"@clerk/nextjs\"\r\nimport axios from \"axios\"\r\n\r\nexport default function StoreManageProducts() {\r\n\r\n    const { getToken } = useAuth()\r\n    const { user } = useUser()\r\n\r\n    const currency = process.env.NEXT_PUBLIC_CURRENCY_SYMBOL || 'â‚¹'\r\n\r\n    const [loading, setLoading] = useState(true)\r\n    const [products, setProducts] = useState([])\r\n\r\n    const fetchProducts = async () => {\r\n        try {\r\n             const token = await getToken()\r\n             const { data } = await axios.get('/api/store/product', {headers: { Authorization: `Bearer ${token}` } })\r\n             setProducts(data.products.sort((a, b)=> new Date(b.createdAt) - new Date(a.createdAt)))\r\n        } catch (error) {\r\n            toast.error(error?.response?.data?.error || error.message)\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const toggleStock = async (productId) => {\r\n        try {\r\n            const token = await getToken()\r\n            const { data } = await axios.post('/api/store/stock-toggle',{ productId }, {headers: { Authorization: `Bearer ${token}` } })\r\n            setProducts(prevProducts => prevProducts.map(product =>  product.id === productId ? {...product, inStock: !product.inStock} : product))\r\n\r\n            toast.success(data.message)\r\n        } catch (error) {\r\n            toast.error(error?.response?.data?.error || error.message)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(user){\r\n            fetchProducts()\r\n        }  \r\n    }, [user])\r\n\r\n    if (loading) return <Loading />\r\n\r\n    return (\r\n        <>\r\n            <h1 className=\"text-2xl text-slate-500 mb-5\">Manage <span className=\"text-slate-800 font-medium\">Products</span></h1>\r\n            <table className=\"w-full max-w-4xl text-left  ring ring-slate-200  rounded overflow-hidden text-sm\">\r\n                <thead className=\"bg-slate-50 text-gray-700 uppercase tracking-wider\">\r\n                    <tr>\r\n                        <th className=\"px-4 py-3\">Name</th>\r\n                        <th className=\"px-4 py-3 hidden md:table-cell\">Description</th>\r\n                        <th className=\"px-4 py-3 hidden md:table-cell\">MRP</th>\r\n                        <th className=\"px-4 py-3\">Price</th>\r\n                        <th className=\"px-4 py-3\">Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"text-slate-700\">\r\n                    {products.map((product) => (\r\n                        <tr key={product.id} className=\"border-t border-gray-200 hover:bg-gray-50\">\r\n                            <td className=\"px-4 py-3\">\r\n                                <div className=\"flex gap-2 items-center\">\r\n                                    <Image width={40} height={40} className='p-1 shadow rounded cursor-pointer' src={product.images[0]} alt=\"\" />\r\n                                    {product.name}\r\n                                </div>\r\n                            </td>\r\n                            <td className=\"px-4 py-3 max-w-md text-slate-600 hidden md:table-cell truncate\">{product.description}</td>\r\n                            <td className=\"px-4 py-3 hidden md:table-cell\">{currency} {product.mrp.toLocaleString()}</td>\r\n                            <td className=\"px-4 py-3\">{currency} {product.price.toLocaleString()}</td>\r\n                            <td className=\"px-4 py-3 text-center\">\r\n                                <label className=\"relative inline-flex items-center cursor-pointer text-gray-900 gap-3\">\r\n                                    <input type=\"checkbox\" className=\"sr-only peer\" onChange={() => toast.promise(toggleStock(product.id), { loading: \"Updating data...\" })} checked={product.inStock} />\r\n                                    <div className=\"w-9 h-5 bg-slate-300 rounded-full peer peer-checked:bg-green-600 transition-colors duration-200\"></div>\r\n                                    <span className=\"dot absolute left-1 top-1 w-3 h-3 bg-white rounded-full transition-transform duration-200 ease-in-out peer-checked:translate-x-4\"></span>\r\n                                </label>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </>\r\n    )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}